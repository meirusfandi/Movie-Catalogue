package com.meirusfandi.cataloguemovie.views.detail;import android.content.ContentValues;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.view.View;import android.widget.Button;import android.widget.ImageButton;import android.widget.ImageView;import android.widget.TextView;import android.widget.Toast;import com.meirusfandi.cataloguemovie.R;import com.meirusfandi.cataloguemovie.BuildConfig;import com.meirusfandi.cataloguemovie.data.MovieModel;import com.meirusfandi.cataloguemovie.data.local.MovieHelper;import com.squareup.picasso.Picasso;import java.util.ArrayList;import butterknife.BindView;import butterknife.ButterKnife;import static android.provider.BaseColumns._ID;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.CONTENT_URI;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.BACKDROP;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.OVERVIEW;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.POPULARITY;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.POSTER;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.RATE_AVG;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.RELEASE;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.TITLE;public class DetailActivity extends AppCompatActivity {    public static String EXTRA_ID = "extra_id";    public static String EXTRA_TITLE = "extra_title";    public static String EXTRA_RELEASE = "extra_release";    public static String EXTRA_OVERVIEW = "extra_overview";    public static String EXTRA_POSTER = "extra_poster";    public static String EXTRA_BACKDROP = "extra_backdrop";    public static String EXTRA_RATING = "extra_rating";    public static String EXTRA_POPULARITY = "extra_popularity";    @BindView(R.id.backdrop)    ImageView backdrop;    @BindView(R.id.title)    TextView title;    @BindView(R.id.rating)    TextView rating;    @BindView(R.id.popularity)    TextView popularity;    @BindView(R.id.release)    TextView release;    @BindView(R.id.overview)    TextView overview;    @BindView(R.id.btnfavorite)    Button favorit;    Boolean isfavorit = false;    MovieHelper movieHelper;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_detail);        ButterKnife.bind(this);        title.setText(getIntent().getStringExtra(EXTRA_TITLE));        release.setText(getIntent().getStringExtra(EXTRA_RELEASE));        overview.setText(getIntent().getStringExtra(EXTRA_OVERVIEW));        rating.setText(getIntent().getStringExtra(EXTRA_RATING));        popularity.setText(getIntent().getStringExtra(EXTRA_POPULARITY));        Picasso.with(this)                .load(BuildConfig.BACKDROP_PATH+getIntent().getStringExtra(EXTRA_BACKDROP))                .placeholder(getResources().getDrawable(R.drawable.ic_launcher_foreground))                .error(getResources().getDrawable(R.drawable.ic_launcher_foreground))                .into(backdrop);        movieHelper = new MovieHelper(this);        movieHelper.open();        ArrayList<MovieModel> movieModels = movieHelper.getAllMovie();        for (int i=0;i<movieModels.size();i++){            if (getIntent().getIntExtra(EXTRA_ID, 0) == movieModels.get(i).getId()){                isfavorit = true;            }        }        if (isfavorit){            favorit.setText(R.string.remove_favorite);        } else {            favorit.setText(R.string.add_favorite);        }        favorit.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                ContentValues contentValues = new ContentValues();                contentValues.put(_ID, getIntent().getIntExtra(EXTRA_ID, 0));                contentValues.put(TITLE, getIntent().getStringExtra(EXTRA_TITLE));                contentValues.put(RELEASE, getIntent().getStringExtra(EXTRA_RELEASE));                contentValues.put(OVERVIEW, getIntent().getStringExtra(EXTRA_OVERVIEW));                contentValues.put(POSTER, getIntent().getStringExtra(EXTRA_POSTER));                contentValues.put(BACKDROP, getIntent().getStringExtra(EXTRA_BACKDROP));                contentValues.put(RATE_AVG, getIntent().getStringExtra(EXTRA_RATING));                contentValues.put(POPULARITY, getIntent().getStringExtra(EXTRA_POPULARITY));                if (isfavorit){                    favorit.setText(getString(R.string.add_favorite));                    movieHelper.deleteProvider(String.valueOf(getIntent().getIntExtra(EXTRA_ID, 0)));                    Toast.makeText(v.getContext(), R.string.success_remove, Toast.LENGTH_LONG).show();                } else {                    favorit.setText(getString(R.string.remove_favorite));                    getContentResolver().insert(CONTENT_URI, contentValues);                    Toast.makeText(v.getContext(), R.string.success_saved, Toast.LENGTH_LONG).show();                }            }        });    }}