package com.meirusfandi.cataloguemovie.views.detail;import android.content.ContentValues;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.view.View;import android.widget.Button;import android.widget.ImageView;import android.widget.TextView;import android.widget.Toast;import com.meirusfandi.cataloguemovie.R;import com.meirusfandi.cataloguemovie.BuildConfig;import com.meirusfandi.cataloguemovie.data.MovieModel;import com.meirusfandi.cataloguemovie.data.local.MovieHelper;import com.squareup.picasso.Picasso;import java.util.ArrayList;import butterknife.BindView;import butterknife.ButterKnife;import static android.provider.BaseColumns._ID;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.CONTENT_URI;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.BACKDROP;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.OVERVIEW;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.POPULARITY;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.POSTER;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.RATE_AVG;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.RELEASE;import static com.meirusfandi.cataloguemovie.data.local.DatabaseContract.FavoriteColumns.TITLE;public class DetailActivity extends AppCompatActivity {    public static String EXTRA_ID = String.valueOf(R.string.extra_id);    public static String EXTRA_MOVIE = String.valueOf(R.string.extra_movie);    @BindView(R.id.backdrop)    ImageView backdrop;    @BindView(R.id.title)    TextView title;    @BindView(R.id.rating)    TextView rating;    @BindView(R.id.popularity)    TextView popularity;    @BindView(R.id.release)    TextView release;    @BindView(R.id.overview)    TextView overview;    @BindView(R.id.btnfavorite)    Button favorit;    Boolean isfavorit = false;    MovieHelper movieHelper;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_detail);        ButterKnife.bind(this);        final MovieModel movieModel = getIntent().getParcelableExtra(EXTRA_MOVIE);        title.setText(movieModel.getTitle());        release.setText(movieModel.getRelease());        overview.setText(movieModel.getOverview());        rating.setText(movieModel.getRating());        popularity.setText(movieModel.getPopularity());        Picasso.with(this)                .load(BuildConfig.BACKDROP_PATH+movieModel.getBackdrop())                .placeholder(getResources().getDrawable(R.drawable.ic_launcher_foreground))                .error(getResources().getDrawable(R.drawable.ic_launcher_foreground))                .into(backdrop);        movieHelper = new MovieHelper(this);        movieHelper.open();        ArrayList<MovieModel> movieModels = movieHelper.getAllMovie();        for (int i=0;i<movieModels.size();i++){            if (getIntent().getIntExtra(EXTRA_ID, 0) == movieModels.get(i).getId()){                isfavorit = true;            }        }        if (isfavorit){            favorit.setText(R.string.remove_favorite);        } else {            favorit.setText(R.string.add_favorite);        }        favorit.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                ContentValues contentValues = new ContentValues();                contentValues.put(_ID, movieModel.getId());                contentValues.put(TITLE, movieModel.getTitle());                contentValues.put(RELEASE, movieModel.getRelease());                contentValues.put(OVERVIEW, movieModel.getOverview());                contentValues.put(POSTER, movieModel.getPoster());                contentValues.put(BACKDROP, movieModel.getBackdrop());                contentValues.put(RATE_AVG, movieModel.getRating());                contentValues.put(POPULARITY, movieModel.getPopularity());                if (isfavorit){                    favorit.setText(getString(R.string.add_favorite));                    movieHelper.deleteProvider(String.valueOf(getIntent().getIntExtra(EXTRA_ID, 0)));                    Toast.makeText(v.getContext(), R.string.success_remove, Toast.LENGTH_LONG).show();                } else {                    favorit.setText(getString(R.string.remove_favorite));                    getContentResolver().insert(CONTENT_URI, contentValues);                    Toast.makeText(v.getContext(), R.string.success_saved, Toast.LENGTH_LONG).show();                }            }        });    }    @Override    public void onSaveInstanceState(Bundle outState) {        super.onSaveInstanceState(outState);    }}